# Fix All Errors - Comprehensive Error Resolution

**SYSTEMATIC ERROR RESOLUTION** following all `docs/rules/` patterns. Detect and fix TypeScript errors, linting issues, build errors, runtime errors, and pattern violations across the entire codebase. and use supabase as single 

---

## Mission

Execute a comprehensive, multi-phase error detection and fixing workflow that:
1. Identifies ALL errors (compilation, type, linting, runtime, pattern violations)
2. Fixes errors systematically according to established patterns in `docs/rules/`
3. Validates fixes with builds and type checks
4. Ensures zero regressions

**CRITICAL:** This is a FIXING workflow. All errors must be resolved, not just reported.

---

## Phase 1: Error Detection & Cataloging

### 1.1 Build & Type Check
```bash
npm run build
npx tsc --noEmit
```

Capture ALL TypeScript errors, build failures, and compilation issues.

### 1.2 Linting Check
```bash
npm run lint
```

Identify all ESLint violations and warnings.

### 1.3 Pattern Violations Scan
Run enforcer agents to detect violations:
- `architecture-enforcer` - 01-architecture.md violations
- `typescript-enforcer` - 02-typescript.md violations
- `react-enforcer` - 03-react.md violations
- `nextjs-enforcer` - 04-nextjs.md violations
- `database-enforcer` - 05-database.md violations
- `api-enforcer` - 06-api.md violations
- `forms-enforcer` - 07-forms.md violations
- `ui-enforcer` - 08-ui.md violations
- `auth-enforcer` - 09-auth.md violations

---

## Phase 2: Error Categorization

Group errors by type and priority:

### Priority 1: Critical Errors (Blocks Build)
- TypeScript compilation errors
- Missing dependencies
- Import/export errors
- Syntax errors

### Priority 2: Type Safety Errors
- Type mismatches
- `any` types that should be typed
- Missing type definitions
- Incorrect generic usage

### Priority 3: Pattern Violations
- Architecture violations (01-architecture.md)
- React patterns (03-react.md)
- Next.js patterns (04-nextjs.md)
- API patterns (06-api.md)
- Database patterns (05-database.md)
- Auth patterns (09-auth.md)
- Forms patterns (07-forms.md)
- UI patterns (08-ui.md)

### Priority 4: Code Quality Issues
- Linting warnings
- Unused variables/imports
- Console statements
- TODO comments requiring action

---

## Phase 3: Systematic Fixes

### 3.1 Fix Critical Errors First
For each critical error:
1. **Read** the file containing the error
2. **Understand** the context and root cause
3. **Apply** fix according to relevant `docs/rules/` pattern
4. **Verify** the specific error is resolved
5. Move to next error

**Rules to follow:**
- **02-typescript.md**: Type safety, proper typing, no `any`
- **01-architecture.md**: File organization, imports, exports
- **04-nextjs.md**: App Router patterns, Server/Client Components

### 3.2 Fix Type Safety Errors
Apply patterns from `docs/rules/02-typescript.md`:
- Use proper type definitions from `lib/types/`
- Import types from `database.types.ts` (DO NOT EDIT this file)
- Use type assertions only when necessary
- Avoid `any`, use `unknown` or proper types

### 3.3 Fix Pattern Violations

#### Architecture (01-architecture.md)
- Correct file structure and naming
- Fix import/export patterns
- Ensure proper feature organization

#### React (03-react.md)
- Server/Client Component boundaries
- Proper hooks usage
- Component composition patterns

#### Next.js (04-nextjs.md)
- Metadata handling
- Caching strategies
- Route organization
- Middleware patterns

#### Database (05-database.md)
- Supabase client usage (server vs client)
- RLS policies
- Query patterns
- Type safety with database types

#### API (06-api.md)
- Server Actions security
- Input validation with Zod
- Error handling
- Response patterns

#### Forms (07-forms.md)
- React Hook Form + Zod integration
- Form Field components
- Validation patterns
- Error display

#### UI (08-ui.md)
- shadcn/ui component usage
- Tailwind patterns
- Accessibility (ARIA, semantic HTML)
- No custom CSS in globals.css

#### Auth (09-auth.md)
- Supabase Auth patterns
- Session management
- Protected routes
- Auth helpers

### 3.4 Fix Code Quality Issues
- Remove unused imports: Keep only what's used
- Fix linting warnings: Apply project ESLint config
- Remove console.logs: Use proper logging in production
- Clean up commented code: Remove or implement TODOs

---

## Phase 4: Validation

### 4.1 Verify Build Success
```bash
npm run build
```
Must complete without errors.

### 4.2 Verify Type Check
```bash
npx tsc --noEmit
```
Must complete without errors.

### 4.3 Verify Linting
```bash
npm run lint
```
Should have zero errors, minimal warnings.

### 4.4 Re-run Enforcers
Run all enforcer agents again to verify pattern compliance.

---

## Phase 5: Regression Check

1. **Check git diff** to review all changes
2. **Verify no functionality broken**: Ensure fixes don't break working features
3. **Test critical paths**: Auth, forms, data fetching
4. **Validate types**: No type assertion hacks or suppressions

---

## Execution Strategy

### Step 1: Initial Assessment
- Run build, type check, and lint
- Count total errors by category
- Create a todo list with all error groups

### Step 2: Fix in Priority Order
- Critical errors → Type errors → Pattern violations → Code quality
- Fix one category at a time
- Verify each fix before moving to next

### Step 3: Continuous Validation
- After each batch of fixes, run relevant validation
- Don't accumulate errors; fix and verify immediately

### Step 4: Final Sweep
- Run all validation commands
- Review all changes
- Ensure zero errors remain

---

## Key Principles

1. **Follow docs/rules/** - Every fix must align with established patterns
2. **No shortcuts** - Fix root causes, not symptoms
3. **Type safety first** - Proper types over `any` or `@ts-ignore`
4. **Test as you go** - Verify each fix before proceeding
5. **No regressions** - Fixes must not break working code
6. **Document when needed** - If pattern is unclear, ask for clarification

---

## Files to NEVER Edit

Per CLAUDE.md:
- `components/ui/*` - shadcn/ui generated components
- `app/globals.css` - Global styles (use Tailwind in components)
- `lib/types/database.types.ts` - Generated from Supabase

---

## Success Criteria

- ✅ `npm run build` completes successfully
- ✅ `npx tsc --noEmit` shows zero errors
- ✅ `npm run lint` shows zero errors
- ✅ All enforcer agents report zero violations
- ✅ No `any` types (except in approved edge cases)
- ✅ All patterns from docs/rules/ followed
- ✅ No regressions in functionality
- ✅ Code is cleaner and more maintainable

---

## Example Execution Flow

1. **Run initial checks** → Identify 47 TypeScript errors, 23 linting warnings
2. **Create todo list** → Group errors by file and type
3. **Fix critical errors** → Resolve 15 build-blocking errors
4. **Verify build** → Build now succeeds
5. **Fix type errors** → Add proper types for 32 instances
6. **Verify types** → Type check passes
7. **Fix pattern violations** → Align with docs/rules patterns
8. **Fix linting** → Clean up warnings
9. **Final validation** → All checks pass ✅
10. **Review changes** → Confirm quality and no regressions

---

## Start Now

Begin with Phase 1: Run build and type check to detect all errors. Create a comprehensive todo list, then systematically fix each error following the phases above.
